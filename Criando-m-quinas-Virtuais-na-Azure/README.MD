# Cria√ß√£o e Configura√ß√£o de M√°quina Virtual no Microsoft Azure

## üìã Pr√©-requisitos

- Conta ativa no Microsoft Azure
- Assinatura v√°lida do Azure (gratuita ou paga)
- Acesso ao Portal do Azure (portal.azure.com)

## üöÄ Processo de Cria√ß√£o da VM

### Passo 1: Acessar o Portal do Azure

1. Acesse [portal.azure.com](https://portal.azure.com)
2. Fa√ßa login com suas credenciais Microsoft
3. No painel principal, localize o bot√£o **"Criar um recurso"** (√≠cone de "+")

*Visualiza√ß√£o: Painel principal do Azure com menu lateral esquerdo e bot√£o azul "Criar um recurso" no topo*

### Passo 2: Selecionar M√°quina Virtual

1. Na p√°gina "Criar um recurso", clique em **"M√°quina Virtual"**
2. Alternativamente, use a barra de pesquisa e digite "Virtual Machine"
3. Clique em **"Criar"** ‚Üí **"M√°quina virtual do Azure"**

*Visualiza√ß√£o: P√°gina de recursos com categorias como "Computa√ß√£o", "Rede", "Armazenamento". VM aparece destacada na se√ß√£o Computa√ß√£o*

### Passo 3: Configura√ß√µes B√°sicas

#### 3.1 Detalhes do Projeto
- **Assinatura**: Selecione sua assinatura ativa
- **Grupo de recursos**: 
  - Criar novo: Digite um nome (ex: `rg-vm-teste`)
  - Ou selecionar existente

#### 3.2 Detalhes da Inst√¢ncia
- **Nome da m√°quina virtual**: `vm-exemplo-01`
- **Regi√£o**: Escolha a mais pr√≥xima (ex: `Brazil South`)
- **Op√ß√µes de disponibilidade**: 
  - Para testes: "Nenhuma redund√¢ncia de infraestrutura necess√°ria"
  - Para produ√ß√£o: "Conjunto de disponibilidade" ou "Zona de disponibilidade"

#### 3.3 Imagem e Tamanho
- **Imagem**: 
  - Windows: `Windows Server 2022 Datacenter`
  - Linux: `Ubuntu Server 20.04 LTS`
- **Tamanho**: 
  - Para testes: `Standard_B1s` (1 vCPU, 1GB RAM)
  - Para desenvolvimento: `Standard_B2s` (2 vCPUs, 4GB RAM)

*Visualiza√ß√£o: Formul√°rio com campos de sele√ß√£o dropdown e campos de texto. Se√ß√£o "Tamanho" mostra tabela com diferentes configura√ß√µes de CPU/RAM*

#### 3.4 Conta de Administrador

**Para Windows:**
- **Nome de usu√°rio**: `azureuser`
- **Senha**: Senha forte (m√≠n. 12 caracteres)
- **Confirmar senha**: Repetir a senha

**Para Linux:**
- **Tipo de autentica√ß√£o**: 
  - Senha: Configure usu√°rio e senha
  - Chave SSH: Upload da chave p√∫blica

#### 3.5 Regras de Porta de Entrada
- Marque: **"Permitir portas selecionadas"**
- **Portas de entrada p√∫blicas**:
  - Windows: `RDP (3389)`
  - Linux: `SSH (22)`, `HTTP (80)`, `HTTPS (443)`

### Passo 4: Configura√ß√µes de Discos

1. Clique em **"Pr√≥ximo: Discos"**
2. **Tipo de disco do SO**: 
   - Desenvolvimento: `SSD Standard`
   - Produ√ß√£o: `SSD Premium`
3. **Criptografia**: Manter padr√£o (habilitado)
4. Para discos adicionais: Clique em **"Criar e anexar um novo disco"**

*Visualiza√ß√£o: Interface com op√ß√µes de tipo de disco em cards visuais mostrando SSD Premium, SSD Standard, e HDD Standard com pre√ßos*

### Passo 5: Configura√ß√µes de Rede

1. **Rede virtual**: Criar nova ou usar existente
   - Nome: `vnet-vm-exemplo`
   - Espa√ßo de endere√ßo: `10.0.0.0/16`
2. **Sub-rede**: 
   - Nome: `subnet-default`
   - Intervalo: `10.0.0.0/24`
3. **IP p√∫blico**: Criar novo
   - Nome: `ip-vm-exemplo`
   - SKU: `Standard`
4. **Grupo de seguran√ßa de rede**: B√°sico
5. **Balanceamento de carga**: N√£o (para VM √∫nica)

### Passo 6: Gerenciamento

Configura√ß√µes recomendadas:
- **Identidade**: Habilitada (identidade gerenciada atribu√≠da pelo sistema)
- **Logon do Azure AD**: Habilitado (para Windows)
- **Desligamento autom√°tico**: 
  - Habilitado: `19:00` (para economizar custos)
  - Fuso hor√°rio: `(UTC-03:00) Bras√≠lia`
- **Backup**: 
  - Habilitado para produ√ß√£o
  - Desabilitado para testes

### Passo 7: Monitoramento

- **Diagn√≥stico de inicializa√ß√£o**: Habilitado
- **Diagn√≥sticos do SO convidado**: Habilitado
- **Insights da VM**: Habilitado (recomendado)

### Passo 8: Configura√ß√µes Avan√ßadas

Geralmente manter padr√µes, exceto:
- **Extens√µes**: Adicionar se necess√°rio (ex: antiv√≠rus, agents)
- **Dados personalizados**: Scripts de inicializa√ß√£o (se aplic√°vel)

### Passo 9: Tags (Opcional)

Adicionar tags para organiza√ß√£o:
- `Ambiente`: `Desenvolvimento`
- `Projeto`: `NomeDoProjeto`
- `Respons√°vel`: `SeuNome`

### Passo 10: Revisar e Criar

1. Clique em **"Revisar + criar"**
2. Aguarde a valida√ß√£o (barra verde de progresso)
3. Revise o resumo e custos estimados
4. Clique em **"Criar"**

*Visualiza√ß√£o: P√°gina de resumo com todas as configura√ß√µes em formato de lista, custos mensais estimados em destaque, e bot√£o azul "Criar"*

## üîß P√≥s-Cria√ß√£o: Configura√ß√£o Inicial

### Conex√£o com a VM

#### Windows (RDP)
```bash
# No portal Azure, v√° para a VM ‚Üí Conectar ‚Üí RDP
# Baixe o arquivo .rdp e execute
# Use as credenciais configuradas
```

#### Linux (SSH)
```bash
# Obtenha o IP p√∫blico da VM no portal
ssh azureuser@<IP_PUBLICO>
```

### Configura√ß√µes de Seguran√ßa Recomendadas

#### 1. Atualiza√ß√£o do Sistema
**Windows:**
```powershell
# Execute Windows Update
Get-WindowsUpdate -Install -AcceptAll
```

**Linux:**
```bash
sudo apt update && sudo apt upgrade -y
```

#### 2. Configura√ß√£o de Firewall
**Windows:**
- Configure Windows Defender Firewall
- Libere apenas portas necess√°rias

**Linux (Ubuntu):**
```bash
sudo ufw enable
sudo ufw allow ssh
sudo ufw allow http
sudo ufw allow https
```

#### 3. Grupos de Seguran√ßa de Rede (NSG)
No portal Azure:
1. V√° para a VM ‚Üí Rede
2. Clique no NSG associado
3. Configure regras espec√≠ficas:
   - Remova regras muito permissivas
   - Adicione regras por IP de origem espec√≠fico

## üí∞ Gerenciamento de Custos

### Estrat√©gias de Economia
1. **Desligamento autom√°tico**: Configure hor√°rios
2. **Dimensionamento adequado**: Monitore uso de CPU/RAM
3. **Reservas**: Para VMs de longa dura√ß√£o
4. **Discos**: Use SSD Standard para desenvolvimento

### Monitoramento de Custos
```bash
# No portal: Servi√ßos ‚Üí Gerenciamento de Custos + Cobran√ßa
# Configure alertas de or√ßamento
# Analise relat√≥rios de uso
```

## üîç Monitoramento e Manuten√ß√£o

### M√©tricas Importantes
- **CPU**: < 80% em m√©dia
- **Mem√≥ria**: < 85% utiliza√ß√£o
- **Disco**: < 90% de uso
- **Rede**: Monitorar throughput

### Azure Monitor
1. Habilite Application Insights
2. Configure alertas personalizados
3. Analise logs regularmente

## ‚ùå Problemas Comuns e Solu√ß√µes

### 1. N√£o consegue conectar via RDP/SSH
**Solu√ß√£o:**
- Verifique NSG (porta liberada)
- Confirme IP p√∫blico atribu√≠do
- Teste conectividade de rede

### 2. VM lenta ou travando
**Solu√ß√£o:**
- Verifique m√©tricas de CPU/RAM
- Considere upgrade de tamanho
- Analise processos em execu√ß√£o

### 3. Custos elevados
**Solu√ß√£o:**
- Configure desligamento autom√°tico
- Redimensione a VM
- Analise discos desnecess√°rios

## üìö Recursos √öteis

- [Documenta√ß√£o Oficial Azure VM](https://docs.microsoft.com/azure/virtual-machines/)
- [Calculadora de Pre√ßos Azure](https://azure.microsoft.com/pricing/calculator/)
- [Azure Advisor](https://portal.azure.com/#blade/Microsoft_Azure_Expert/AdvisorMenuBlade/overview)
- [Azure Status](https://status.azure.com/)

## üè∑Ô∏è Tags Sugeridas para Organiza√ß√£o

| Tag | Exemplo | Descri√ß√£o |
|-----|---------|-----------|
| Environment | Production/Development | Ambiente da VM |
| Project | WebApp-Frontend | Projeto relacionado |
| Owner | joao.silva@empresa.com | Respons√°vel |
| CostCenter | TI-001 | Centro de custo |
| AutoShutdown | Enabled | Controle de desligamento |

---

**üí° Dica Final:** Sempre inicie com configura√ß√µes b√°sicas e dimensione conforme necess√°rio. O Azure permite ajustes posteriores na maioria das configura√ß√µes.

**‚ö†Ô∏è Importante:** Lembre-se de desligar VMs n√£o utilizadas para evitar custos desnecess√°rios!